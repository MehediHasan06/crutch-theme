<header class="items-center header page-width">

  <div class="mx-auto my-2 header_logo md:my-0 md:mr-auto md:ml-0" style="max-width: {{ section.settings.logo_width }}px;">
    {% if section.settings.logo != blank %}
      <a href="/" class="header_logo">
        {{ section.settings.logo | image_url: width: 400 | image_tag: loading: 'lazy' }}
      </a>
    {% else %}
      <a href="/" class="header_logo-title">
        {{ shop.name }}
      </a>
    {% endif %}
  </div>

  <nav class="flex header_menu" x-data>      
    <ul class="hidden header_menu-nav md:flex">
      {% for link in section.settings.menu.links %}
        {% if link.links != blank %}
          <li class="relative block px-4 py-5 nav__item">
            <a href="{{ link.url }}">{{ link.title }}</a>
            <ul class="nav__item-submenu absolute bg-white border py-3 px-4 min-w-[160px] top-16 left-1/2 transform -translate-x-1/2">
              {% for sublink in linklists[link.handle].links %}
                <li>
                  <a class="block py-1 hover:opacity-75 " href="{{ sublink.url }}">
                    {{ sublink.title }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          </li>
        {% else %}
          <li>
            <a class="block px-4 py-5 nav__item" href="{{ link.url }}"> {{ link.title }}</a>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </nav>

  <div class="flex items-center justify-end space-x-5 header_icons">
      {%- if shop.customer_accounts_enabled -%}
        <div class="relative z-10 account-menu-wrapper">
          <a href="{{ routes.account_url }}" 
            title="account link"
            class="block text-center header__icon">
            {% render 'icon-account', class: 'w-10 mx-auto' %}
          </a>
        </div>
      {%- endif -%}

        <button 
          type="button"
          title="Cart button"
          @click="$dispatch('toggle-cart')"
          class="relative text-center header__icon">
            {% render 'icon-cart', class: 'w-10' %}
            <span class="sr-only">{{ 'templates.cart.cart' | t }}</span>
            <span x-text="cart_count" class="cart__count min-w-[22px] text-sm min-h-[22px] absolute grid place-content-center rounded-full -top-3 -right-1 text-white bg-black"> {{ cart.item_count }} </span>
        </button>
  </div>

</header>  


